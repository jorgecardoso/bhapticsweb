/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./bundle.js":
/*!*******************!*\
  !*** ./bundle.js ***!
  \*******************/
/***/ (function(module) {

eval("/*\n * ATTENTION: The \"eval\" devtool has been used (maybe by default in mode: \"development\").\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse {}\n})(this, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/BhapticsPlayer.ts\":\n/*!*******************************!*\\\n  !*** ./src/BhapticsPlayer.ts ***!\n  \\*******************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval(\"\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar PlayerSocket_1 = __importDefault(__webpack_require__(/*! ./PlayerSocket */ \\\"./src/PlayerSocket.ts\\\"));\\nvar Interfaces_1 = __webpack_require__(/*! ./models/Interfaces */ \\\"./src/models/Interfaces.ts\\\");\\nvar ErrorCode_1 = __importDefault(__webpack_require__(/*! ./models/ErrorCode */ \\\"./src/models/ErrorCode.ts\\\"));\\nvar BhapticsPlayer = /** @class */ (function () {\\n    function BhapticsPlayer() {\\n        var _this = this;\\n        this.registeredKeys = [];\\n        this.addListener = function (func) {\\n            if (!_this.socket) {\\n                console.log('BhapticsSdk not initialized');\\n                return;\\n            }\\n            _this.socket.addListener(func);\\n        };\\n        this.initialize = function (appId, appName, url) {\\n            if (appId === undefined) {\\n                throw new Error('App ID is required');\\n            }\\n            if (appName === undefined) {\\n                throw new Error('App Name is required');\\n            }\\n            if (_this.socket) {\\n                console.log('initialize called twice');\\n                return;\\n            }\\n            _this.socket = new PlayerSocket_1.default(appId, appName, undefined, url);\\n            _this.addListener((function (msg) {\\n                var _a;\\n                if ((_a = msg.message) === null || _a === void 0 ? void 0 : _a.RegisteredKeys) {\\n                    _this.registeredKeys = msg.message.RegisteredKeys;\\n                }\\n            }));\\n        };\\n        this.turnOff = function (key) {\\n            var request = {\\n                Submit: [{\\n                        Type: 'turnOff',\\n                        Key: key,\\n                    }],\\n            };\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            return _this.socket.send(JSON.stringify(request));\\n        };\\n        this.turnOffAll = function () {\\n            var request = {\\n                Submit: [{\\n                        Type: 'turnOffAll',\\n                    }],\\n            };\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            return _this.socket.send(JSON.stringify(request));\\n        };\\n        this.submitDot = function (key, pos, dotPoints, durationMillis) {\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            if (durationMillis < 20 || durationMillis > 100000) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_DURATION_MILLIS;\\n            }\\n            if (dotPoints === undefined) {\\n                return ErrorCode_1.default.MESSAGE_INVALID;\\n            }\\n            for (var i = 0; i < dotPoints.length; i++) {\\n                var point = dotPoints[i];\\n                switch (pos) {\\n                    case Interfaces_1.PositionType.ForearmL:\\n                    case Interfaces_1.PositionType.ForearmR:\\n                        if (point.index < 0 || point.index >= 6) {\\n                            return ErrorCode_1.default.MESSAGE_INVALID_DOT_INDEX_ARM;\\n                        }\\n                        break;\\n                    case Interfaces_1.PositionType.Head:\\n                        if (point.index < 0 || point.index >= 6) {\\n                            return ErrorCode_1.default.MESSAGE_INVALID_DOT_INDEX_HEAD;\\n                        }\\n                        break;\\n                    case Interfaces_1.PositionType.VestBack:\\n                    case Interfaces_1.PositionType.VestFront:\\n                        if (point.index < 0 || point.index >= 20) {\\n                            return ErrorCode_1.default.MESSAGE_INVALID_DOT_INDEX_VEST;\\n                        }\\n                        break;\\n                }\\n                if (point.intensity < 0 || point.intensity > 100) {\\n                    return ErrorCode_1.default.MESSAGE_INVALID_INTENSITY;\\n                }\\n            }\\n            var request = {\\n                Submit: [{\\n                        Type: 'frame',\\n                        Key: key,\\n                        Frame: {\\n                            Position: pos,\\n                            PathPoints: [],\\n                            DotPoints: dotPoints,\\n                            DurationMillis: durationMillis,\\n                        },\\n                    }],\\n            };\\n            return _this.socket.send(JSON.stringify(request, function (_, val) {\\n                return val.toFixed ? Number(val.toFixed(3)) : val;\\n            }));\\n        };\\n        this.submitPath = function (key, pos, pathPoints, durationMillis) {\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            if (isNaN(durationMillis)) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_DURATION_MILLIS;\\n            }\\n            if (durationMillis < 20 || durationMillis > 100000) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_DURATION_MILLIS;\\n            }\\n            if (pathPoints === undefined) {\\n                return ErrorCode_1.default.MESSAGE_INVALID;\\n            }\\n            for (var i = 0; i < pathPoints.length; i++) {\\n                var point = pathPoints[i];\\n                if (point.x < 0 || point.x > 1) {\\n                    return ErrorCode_1.default.MESSAGE_INVALID_X;\\n                }\\n                if (point.y < 0 || point.y > 1) {\\n                    return ErrorCode_1.default.MESSAGE_INVALID_Y;\\n                }\\n                if (point.intensity < 0 || point.intensity > 100) {\\n                    return ErrorCode_1.default.MESSAGE_INVALID_INTENSITY;\\n                }\\n            }\\n            var request = {\\n                Submit: [{\\n                        Type: 'frame',\\n                        Key: key,\\n                        Frame: {\\n                            Position: pos,\\n                            PathPoints: pathPoints,\\n                            DotPoints: [],\\n                            DurationMillis: durationMillis,\\n                        },\\n                    }],\\n            };\\n            return _this.socket.send(JSON.stringify(request, function (_, val) {\\n                return val.toFixed ? Number(val.toFixed(3)) : val;\\n            }));\\n        };\\n        this.registerFile = function (key, json) {\\n            if (!_this.socket) {\\n                throw new Error('BhapticsSdk not initialized');\\n            }\\n            var jsonData = JSON.parse(json);\\n            var project = jsonData[\\\"project\\\"];\\n            var request = {\\n                Register: [{\\n                        Key: key,\\n                        project: project,\\n                    }]\\n            };\\n            return _this.socket.send(JSON.stringify(request));\\n        };\\n        this.submitRegistered = function (key) {\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            if (_this.registeredKeys.find(function (v) { return v === key; }) === undefined) {\\n                return ErrorCode_1.default.MESSAGE_NOT_REGISTERED_KEY;\\n            }\\n            var request = {\\n                Submit: [{\\n                        Type: 'key',\\n                        Key: key,\\n                    }],\\n            };\\n            return _this.socket.send(JSON.stringify(request));\\n        };\\n        this.submitRegisteredWithScaleOption = function (key, scaleOption) {\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            if (_this.registeredKeys.find(function (v) { return v === key; }) === undefined) {\\n                return ErrorCode_1.default.MESSAGE_NOT_REGISTERED_KEY;\\n            }\\n            if (scaleOption.intensity < 0.2 || scaleOption.intensity > 5) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_SCALE_INTENSITY_RATIO;\\n            }\\n            if (scaleOption.duration < 0.2 || scaleOption.duration > 5) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_SCALE_DURATION_RATIO;\\n            }\\n            var request = {\\n                Submit: [{\\n                        Type: 'key',\\n                        Key: key,\\n                        Parameters: {\\n                            scaleOption: scaleOption,\\n                        }\\n                    }],\\n            };\\n            return _this.socket.send(JSON.stringify(request));\\n        };\\n        this.submitRegisteredWithRotationOption = function (key, rotationOption) {\\n            if (!_this.socket) {\\n                return ErrorCode_1.default.MESSAGE_NOT_INITIALIZED;\\n            }\\n            if (_this.registeredKeys.find(function (v) { return v === key; }) === undefined) {\\n                return ErrorCode_1.default.MESSAGE_NOT_REGISTERED_KEY;\\n            }\\n            if (rotationOption.offsetAngleX < 0 || rotationOption.offsetAngleX > 360) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_ROTATION_X;\\n            }\\n            if (rotationOption.offsetY < -0.5 || rotationOption.offsetY > 0.5) {\\n                return ErrorCode_1.default.MESSAGE_INVALID_ROTATION_Y;\\n            }\\n            var request = {\\n                Submit: [{\\n                        Type: 'key',\\n                        Key: key,\\n                        Parameters: {\\n                            rotationOption: rotationOption,\\n                        }\\n                    }],\\n            };\\n            return _this.socket.send(JSON.stringify(request));\\n        };\\n    }\\n    return BhapticsPlayer;\\n}());\\nexports[\\\"default\\\"] = BhapticsPlayer;\\n\\n\\n//# sourceURL=webpack://tactJs/./src/BhapticsPlayer.ts?\");\n\n/***/ }),\n\n/***/ \"./src/PlayerSocket.ts\":\n/*!*****************************!*\\\n  !*** ./src/PlayerSocket.ts ***!\n  \\*****************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval(\"\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.STATUS = void 0;\\nvar ErrorCode_1 = __importDefault(__webpack_require__(/*! ./models/ErrorCode */ \\\"./src/models/ErrorCode.ts\\\"));\\nvar DEFAULT_URL = 'ws://127.0.0.1:15881/v2/feedbacks?'; //app_id=com.bhaptics.designer2&app_name=bHaptics Designer';\\nvar STATUS;\\n(function (STATUS) {\\n    STATUS[\\\"CONNECTING\\\"] = \\\"Connecting\\\";\\n    STATUS[\\\"CONNECTED\\\"] = \\\"Connected\\\";\\n    STATUS[\\\"DISCONNECT\\\"] = \\\"Disconnected\\\";\\n})(STATUS || (exports.STATUS = STATUS = {}));\\nvar DEFAULT_RETRY_CONNECT_TIME = 5000;\\nvar PlayerSocket = /** @class */ (function () {\\n    function PlayerSocket(appId, appName, retryConnectTime, url) {\\n        if (appId === void 0) { appId = \\\"yourAppId\\\"; }\\n        if (appName === void 0) { appName = 'yourAppName'; }\\n        if (retryConnectTime === void 0) { retryConnectTime = DEFAULT_RETRY_CONNECT_TIME; }\\n        if (url === void 0) { url = DEFAULT_URL; }\\n        var _this = this;\\n        // eslint-disable-next-line @typescript-eslint/ban-types\\n        this.handlers = [];\\n        this.isTriggered = false;\\n        this.addListener = function (func) {\\n            _this.handlers.push(func);\\n        };\\n        this.emit = function (msg) {\\n            _this.handlers.forEach(function (func) {\\n                func(msg);\\n            });\\n        };\\n        this.connect = function () {\\n            try {\\n                _this.websocketClient = new WebSocket(\\\"\\\".concat(_this.url, \\\"app_id=\\\").concat(_this.appId, \\\"&app_name=\\\").concat(_this.appName));\\n                console.log(\\\"connecting to: \\\" + \\\"\\\".concat(_this.url, \\\"app_id=\\\").concat(_this.appId, \\\"&app_name=\\\").concat(_this.appName));\\n            }\\n            catch (e) {\\n                // connection failed\\n                console.log('PlayerSocket', e);\\n                return;\\n            }\\n            _this.websocketClient.onopen = function () {\\n                console.log(\\\"connected\\\");\\n                _this.currentStatus = STATUS.CONNECTED;\\n                _this.emit({\\n                    status: _this.currentStatus,\\n                    message: _this.message,\\n                });\\n            };\\n            _this.websocketClient.onmessage = function (result) {\\n                if (JSON.stringify(_this.message) === result.data) {\\n                    return;\\n                }\\n                _this.message = JSON.parse(result.data);\\n                _this.emit({\\n                    status: _this.currentStatus,\\n                    message: _this.message,\\n                });\\n            };\\n            _this.websocketClient.onclose = function (_) {\\n                _this.currentStatus = STATUS.DISCONNECT;\\n                _this.emit({\\n                    status: _this.currentStatus,\\n                    message: _this.message,\\n                });\\n                setTimeout(function () {\\n                    _this.connect();\\n                }, _this.retryConnectTime);\\n            };\\n            _this.websocketClient.onerror = function (event) {\\n                _this.currentStatus = STATUS.DISCONNECT;\\n                _this.emit({\\n                    status: _this.currentStatus,\\n                    message: event.message,\\n                });\\n            };\\n            _this.currentStatus = STATUS.CONNECTING;\\n            _this.emit({\\n                status: _this.currentStatus,\\n                message: _this.message,\\n            });\\n        };\\n        this.send = function (message) {\\n            if (message === undefined) {\\n                return ErrorCode_1.default.CONNECTION_NOT_ESTABLISHED;\\n            }\\n            if (!_this.isTriggered) {\\n                _this.isTriggered = true;\\n                _this.connect();\\n                return ErrorCode_1.default.CONNECTION_NOT_ESTABLISHED;\\n            }\\n            if (_this.websocketClient === undefined) {\\n                return ErrorCode_1.default.CONNECTION_NOT_ESTABLISHED;\\n            }\\n            if (_this.currentStatus !== STATUS.CONNECTED) {\\n                return ErrorCode_1.default.CONNECTION_NOT_ESTABLISHED;\\n            }\\n            try {\\n                _this.websocketClient.send(message);\\n                return ErrorCode_1.default.SUCCESS;\\n            }\\n            catch (e) {\\n                // sending failed\\n                return ErrorCode_1.default.FAILED_TO_SEND_MESSAGE;\\n            }\\n        };\\n        this.appName = appName;\\n        this.appId = appId;\\n        this.message = {};\\n        this.retryConnectTime = retryConnectTime;\\n        console.log(url);\\n        this.url = url;\\n        console.log(this.url);\\n        this.currentStatus = STATUS.DISCONNECT;\\n    }\\n    return PlayerSocket;\\n}());\\nexports[\\\"default\\\"] = PlayerSocket;\\n\\n\\n//# sourceURL=webpack://tactJs/./src/PlayerSocket.ts?\");\n\n/***/ }),\n\n/***/ \"./src/index.ts\":\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval(\"\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.BhapticsPlayer = exports.ErrorCode = exports.PositionType = void 0;\\nvar BhapticsPlayer_1 = __importDefault(__webpack_require__(/*! ./BhapticsPlayer */ \\\"./src/BhapticsPlayer.ts\\\"));\\nexports.BhapticsPlayer = BhapticsPlayer_1.default;\\nvar ErrorCode_1 = __importDefault(__webpack_require__(/*! ./models/ErrorCode */ \\\"./src/models/ErrorCode.ts\\\"));\\nexports.ErrorCode = ErrorCode_1.default;\\nvar Interfaces_1 = __webpack_require__(/*! ./models/Interfaces */ \\\"./src/models/Interfaces.ts\\\");\\nObject.defineProperty(exports, \\\"PositionType\\\", ({ enumerable: true, get: function () { return Interfaces_1.PositionType; } }));\\nexports[\\\"default\\\"] = new BhapticsPlayer_1.default();\\n\\n\\n//# sourceURL=webpack://tactJs/./src/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/models/ErrorCode.ts\":\n/*!*********************************!*\\\n  !*** ./src/models/ErrorCode.ts ***!\n  \\*********************************/\n/***/ ((__unused_webpack_module, exports) => {\n\neval(\"\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ErrorCode = void 0;\\nvar ErrorCode;\\n(function (ErrorCode) {\\n    ErrorCode[ErrorCode[\\\"SUCCESS\\\"] = 0] = \\\"SUCCESS\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_NOT_DEFINED\\\"] = 1] = \\\"MESSAGE_NOT_DEFINED\\\";\\n    ErrorCode[ErrorCode[\\\"CONNECTION_NOT_ESTABLISHED\\\"] = 2] = \\\"CONNECTION_NOT_ESTABLISHED\\\";\\n    ErrorCode[ErrorCode[\\\"FAILED_TO_SEND_MESSAGE\\\"] = 3] = \\\"FAILED_TO_SEND_MESSAGE\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID\\\"] = 4] = \\\"MESSAGE_INVALID\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_DURATION_MILLIS\\\"] = 5] = \\\"MESSAGE_INVALID_DURATION_MILLIS\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_DOT_INDEX_HEAD\\\"] = 6] = \\\"MESSAGE_INVALID_DOT_INDEX_HEAD\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_DOT_INDEX_ARM\\\"] = 7] = \\\"MESSAGE_INVALID_DOT_INDEX_ARM\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_DOT_INDEX_VEST\\\"] = 8] = \\\"MESSAGE_INVALID_DOT_INDEX_VEST\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_INTENSITY\\\"] = 9] = \\\"MESSAGE_INVALID_INTENSITY\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_X\\\"] = 10] = \\\"MESSAGE_INVALID_X\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_Y\\\"] = 11] = \\\"MESSAGE_INVALID_Y\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_ROTATION_X\\\"] = 12] = \\\"MESSAGE_INVALID_ROTATION_X\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_ROTATION_Y\\\"] = 13] = \\\"MESSAGE_INVALID_ROTATION_Y\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_SCALE_INTENSITY_RATIO\\\"] = 14] = \\\"MESSAGE_INVALID_SCALE_INTENSITY_RATIO\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_INVALID_SCALE_DURATION_RATIO\\\"] = 15] = \\\"MESSAGE_INVALID_SCALE_DURATION_RATIO\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_NOT_REGISTERED_KEY\\\"] = 16] = \\\"MESSAGE_NOT_REGISTERED_KEY\\\";\\n    ErrorCode[ErrorCode[\\\"MESSAGE_NOT_INITIALIZED\\\"] = 17] = \\\"MESSAGE_NOT_INITIALIZED\\\";\\n})(ErrorCode || (exports.ErrorCode = ErrorCode = {}));\\nexports[\\\"default\\\"] = ErrorCode;\\n\\n\\n//# sourceURL=webpack://tactJs/./src/models/ErrorCode.ts?\");\n\n/***/ }),\n\n/***/ \"./src/models/Interfaces.ts\":\n/*!**********************************!*\\\n  !*** ./src/models/Interfaces.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, exports) => {\n\neval(\"\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.PositionType = void 0;\\nvar PositionType;\\n(function (PositionType) {\\n    PositionType[\\\"VestFront\\\"] = \\\"VestFront\\\";\\n    PositionType[\\\"VestBack\\\"] = \\\"VestBack\\\";\\n    PositionType[\\\"Head\\\"] = \\\"Head\\\";\\n    PositionType[\\\"ForearmL\\\"] = \\\"ForearmL\\\";\\n    PositionType[\\\"ForearmR\\\"] = \\\"ForearmR\\\";\\n    PositionType[\\\"GloveL\\\"] = \\\"GloveL\\\";\\n    PositionType[\\\"GloveR\\\"] = \\\"GloveR\\\";\\n})(PositionType || (exports.PositionType = PositionType = {}));\\n\\n\\n//# sourceURL=webpack://tactJs/./src/models/Interfaces.ts?\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_21018__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __nested_webpack_require_21018__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can't be inlined\n/******/ \tvar __nested_webpack_exports__ = __nested_webpack_require_21018__(\"./src/index.ts\");\n/******/ \t\n/******/ \treturn __nested_webpack_exports__;\n/******/ })()\n;\n});\n\n//# sourceURL=webpack://aframe-bhaptics-component/./bundle.js?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/***/ (() => {

eval("/* global AFRAME */\r\nif (typeof AFRAME === 'undefined') {\r\n    throw new Error('Component \"bHaptics\" attempted to register before AFRAME was available.');\r\n}\r\n\r\n/**\r\n */\r\n/**\r\n * bHaptics component for A-Frame.\r\n */\r\nAFRAME.registerComponent('bhaptics', {\r\n    schema: {\r\n        appname: {type: 'string', default: 'myApp'},\r\n\r\n        on: {type: 'string', default: 'click'},\r\n\r\n        middlewareaddress: {type: 'string', default: ''},\r\n        servicediscoveryaddress: {type: 'string', default: 'https://hmd-link-service.glitch.me'},\r\n    },\r\n\r\n    /**\r\n     * Set if component needs multiple instancing.\r\n     */\r\n    multiple: false,\r\n\r\n    /**\r\n     * Called once when component is attached. Generally for initial setup.\r\n     */\r\n    init: function () {\r\n        let _this = this;\r\n        this._player = null;\r\n\r\n        this.middlewarePromise = null;\r\n        if (_this.data.middlewareaddress == '') {\r\n            this.middlewarePromise = _this._findMiddleware(this.data.servicediscoveryaddress);\r\n        } else {\r\n            this.middlewarePromise = Promise.resolve(_this.data.middlewareaddress);\r\n        }\r\n\r\n        this.el.addEventListener(this.data.on, function() {\r\n            if(_this._player)\r\n            _this._player.submitDot(\"dot\", 'VestFront', [{index: 10, intensity: 100}, {index: 0, intensity: 100}], 100)\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * Called when component is attached and when component data changes.\r\n     * Generally modifies the entity based on the data.\r\n     */\r\n    update: function (oldData) {\r\n        let _this = this;\r\n\r\n        this.middlewarePromise\r\n            .then((middlewareAddress) => {\r\n                console.log(middlewareAddress)\r\n                _this._player = new BhapticsPlayer();\r\n                _this._player.initialize(_this.data.appname, _this.data.appname, middlewareAddress + \"/v2/feedbacks?\");\r\n/*\r\n                setTimeout(function () {\r\n                    console.log(\"sending\")\r\n                    player.submitDot(\"testKey\", 'VestFront', [{index: 0, intensity: 100}], 100)\r\n                }, 10000);\r\n*/\r\n            })\r\n            .catch(error => {\r\n                console.error(\"Updating component: \", error);\r\n            })\r\n    },\r\n\r\n    /**\r\n     * Called when a component is removed (e.g., via removeAttribute).\r\n     * Generally undoes all modifications to the entity.\r\n     */\r\n    remove: function () {\r\n        let _this = this;\r\n\r\n    },\r\n\r\n    /**\r\n     * Called on each scene tick.\r\n     */\r\n    tick: function (t) {\r\n\r\n    },\r\n\r\n    /**\r\n     * Called when entity pauses.\r\n     * Use to stop or remove any dynamic or background behavior such as events.\r\n     */\r\n    pause: function () {\r\n        let _this = this;\r\n        this._registeredEventsPromise\r\n            .then(function ([middlewareAddress, simulator, appName]) {\r\n                this._socket.close();\r\n                return _this.stop(middlewareAddress, simulator, appName);\r\n            })\r\n            .then(function ([middlewareAddress, simulator, appName]) {\r\n                _this._ready = false;\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Called when entity resumes.\r\n     * Use to continue or add any dynamic or background behavior such as events.\r\n     */\r\n    play: function () {\r\n        let _this = this;\r\n\r\n    },\r\n\r\n    _findMiddleware: function (serviceDiscoveryAddress) {\r\n        return new Promise(function (resolve, reject) {\r\n            let interval = 2;\r\n            console.info(\"Using Service Discovery: \", serviceDiscoveryAddress)\r\n            setTimeout(search, interval);\r\n\r\n            function search() {\r\n                fetch(serviceDiscoveryAddress).then(function (page) {\r\n                    return page.json();\r\n                }).then(function (json) {\r\n                    //console.log(json);\r\n                    if (json.bhapticsmiddleware) {\r\n                        console.info(\"bHaptics Middleware found through service discovery: \", json.bhapticsmiddleware);\r\n                        console.log(json.bhapticsmiddleware.address)\r\n                        resolve(json.bhapticsmiddleware.address);\r\n                        //begin(middleware.address);\r\n                    } else {\r\n                        interval = Math.min(interval * 2, 30);\r\n                        console.warn(\"bHaptics middleware not found through service discovery. Trying again in \", interval, \" seconds.\");\r\n                        setTimeout(search, interval * 1000);\r\n                    }\r\n                }).catch(function (error) {\r\n                    console.log(error);\r\n                    reject(error);\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n});\r\n\r\n\n\n//# sourceURL=webpack://aframe-bhaptics-component/./index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	__webpack_require__("./index.js");
/******/ 	var __webpack_exports__ = __webpack_require__("./bundle.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});